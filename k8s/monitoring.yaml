---
# ServiceMonitor cho Prometheus (nếu sử dụng Prometheus Operator)
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: kafka-metrics
  namespace: bigdata
  labels:
    app: kafka
spec:
  selector:
    matchLabels:
      app: kafka
  endpoints:
  - port: kafka
    interval: 30s
---
# ServiceMonitor cho Elasticsearch
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: elasticsearch-metrics
  namespace: bigdata
  labels:
    app: elasticsearch
spec:
  selector:
    matchLabels:
      app: elasticsearch
  endpoints:
  - port: http
    interval: 30s
    path: /_prometheus/metrics
---
# PodMonitor cho Spark Streaming
apiVersion: monitoring.coreos.com/v1
kind: PodMonitor
metadata:
  name: spark-streaming-metrics
  namespace: bigdata
  labels:
    app: spark-streaming
spec:
  selector:
    matchLabels:
      app: spark-streaming
  podMetricsEndpoints:
  - port: metrics
    interval: 30s
